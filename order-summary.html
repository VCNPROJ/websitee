<!DOCTYPE html>
<html>
<head>
<title>Confirm Payment - VCN Fibernet</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

<style>
body {
  background: linear-gradient(120deg,#f4f6fb,#eef1ff);
}

.card-box {
  max-width: 460px;
  margin: auto;
  border-radius: 20px;
  box-shadow: 0 15px 30px rgba(0,0,0,.12);
}

.price {
  font-size: 32px;
  font-weight: bold;
  color: #0d6efd;
}

.badge-plan {
  background: #e8f1ff;
  color: #0d6efd;
  padding: 6px 12px;
  border-radius: 10px;
}

.pay-btn {
  height: 55px;
  font-size: 18px;
}

</style>
</head>

<body>

<div class="container py-5">

<div class="card card-box p-4">

  <h4 class="text-center mb-4">üí≥ Confirm Your Payment</h4>

  <div class="mb-3">
    <small class="text-muted">Customer</small>
    <div id="custName" class="fw-bold">--</div>
  </div>

  <div class="mb-3">
    <small class="text-muted">Plan</small>
    <div id="planName" class="badge-plan">--</div>
  </div>

  <hr>

  <div class="d-flex justify-content-between">
    <span>Base Amount</span>
    <span>‚Çπ<span id="balance">0</span></span>
  </div>

  <div class="d-flex justify-content-between mt-2">
    <span>GST (0%)</span>
    <span>‚Çπ0</span>
  </div>

  <hr>

  <div class="d-flex justify-content-between align-items-center">
    <strong>Total</strong>
    <div class="price">‚Çπ<span id="totalAmount">0</span></div>
  </div>

  <form action="/pay.php" method="POST" class="mt-4">
    <input type="hidden" name="amount" id="payAmount">
    <input type="hidden" name="customer_id" id="customerId">

    <button type="submit" class="btn btn-primary w-100 pay-btn">
      Proceed to Secure Payment üîê
    </button>
  </form>

  <p class="text-center small text-muted mt-3">
    You will be redirected to Paytm secure payment gateway.
  </p>

</div>
</div>

<!--script>
const customer = JSON.parse(localStorage.getItem("customerData"));

if (!localStorage.getItem("loggedIn")) {
  alert("Please login to continue payment.");
  localStorage.setItem("redirectAfterLogin", "/order-summary.html");
  location.href = "/";
}


if (!customer) {
  alert("Session expired");
  location.href = "/";
}
  const saved = localStorage.getItem("customerSession");
const customerr = JSON.parse(saved);
  customerSession = customer;


document.getElementById("custName").innerText =
  customer.firstname + " " + customer.lastname;

document.getElementById("planName").innerText =
  customer.package;

document.getElementById("baseAmount").innerText =
  customer.balance_amout;

document.getElementById("totalAmount").innerText = customerr.balance_amout;

document.getElementById("payAmount").value =
  customer.balance;

document.getElementById("customerId").value =
  customer.accid || customer.acc_id;
</script-->
<script>
const customer = JSON.parse(localStorage.getItem("customerData"));

if (!localStorage.getItem("loggedIn")) {
  alert("Please login to continue payment.");
  localStorage.setItem("redirectAfterLogin", "/order-summary.html");
  location.href = "/";
}

if (!customer) {
  alert("Session expired");
  location.href = "/";
}

const amount = Number(customer.balance_amout) || 0;

// Customer details
document.getElementById("custName").innerText =
  customer.firstname + " " + customer.lastname;

document.getElementById("planName").innerText =
  customer.package;

// Amounts (FIX)
document.getElementById("balance").innerText = amount;
document.getElementById("totalAmount").innerText = amount;

// Hidden form fields
document.getElementById("payAmount").value = amount;
document.getElementById("customerId").value =
  customer.accid || customer.acc_id;
</script>



</body>
</html>


